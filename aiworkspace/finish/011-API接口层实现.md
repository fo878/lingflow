# æ‰§è¡Œè®°å½•ï¼šAPIæ¥å£å±‚å®ç°

> æ‰§è¡Œæ—¶é—´ï¼š2025-01-15
> çŠ¶æ€ï¼šå·²å®Œæˆ

## ä»»åŠ¡æ¦‚è¿°

åˆ›å»ºä¸šåŠ¡APIæ¥å£å±‚ï¼Œå°†æ‰©å±•æ¡†æ¶çš„æœåŠ¡æš´éœ²ç»™å‰ç«¯ä½¿ç”¨ï¼Œå®Œå–„ç³»ç»ŸåŠŸèƒ½ã€‚

---

## å·²åˆ›å»ºçš„æ–‡ä»¶

### 1. ProcessMonitorController - æµç¨‹ç›‘æ§API

**è·¯å¾„**: `/data/lingflow/backend/src/main/java/com/lingflow/controller/ProcessMonitorController.java`

**åŸºç¡€è·¯å¾„**: `/api/monitor`

**APIåˆ—è¡¨**:

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ | è¿”å›å€¼ |
|------|------|------|--------|
| GET | `/process/{processInstanceId}` | è·å–æµç¨‹å®ä¾‹ç›‘æ§ä¿¡æ¯ | ProcessInstanceMonitorVO |
| GET | `/definition/{processDefinitionId}` | è·å–æµç¨‹å®šä¹‰ç›‘æ§ä¿¡æ¯ | ProcessDefinitionMonitorVO |
| GET | `/timeout/{timeoutHours}` | æ£€æµ‹è¶…æ—¶çš„æµç¨‹å®ä¾‹ | List\<String\> |
| GET | `/process/running` | è·å–æ‰€æœ‰è¿è¡Œä¸­çš„æµç¨‹å®ä¾‹ç›‘æ§ | List\<ProcessInstanceMonitorVO\> |
| GET | `/process/{processInstanceId}/activities` | è·å–æ´»åŠ¨èŠ‚ç‚¹ä¿¡æ¯ | List\<ActivityNodeVO\> |
| GET | `/process/{processInstanceId}/progress` | è·å–æµç¨‹è¿›åº¦ä¿¡æ¯ | ProcessProgressVO |

**VOç±»**:

1. **ProcessInstanceMonitorVO** - æµç¨‹å®ä¾‹ç›‘æ§ä¿¡æ¯
   - æµç¨‹å®ä¾‹IDã€å®šä¹‰ä¿¡æ¯
   - è¿è¡Œæ—¶é•¿ï¼ˆæ¯«ç§’ + æ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼‰
   - å½“å‰çŠ¶æ€ï¼ˆRUNNING, SUSPENDED, COMPLETEDï¼‰
   - æ´»åŠ¨èŠ‚ç‚¹æ•°ã€å½“å‰ä»»åŠ¡æ•°
   - æµç¨‹è¿›åº¦ç™¾åˆ†æ¯”

2. **ProcessDefinitionMonitorVO** - æµç¨‹å®šä¹‰ç›‘æ§ä¿¡æ¯
   - æµç¨‹å®šä¹‰ä¿¡æ¯ï¼ˆIDã€Keyã€Nameã€Versionï¼‰
   - è¿è¡Œä¸­/å·²å®Œæˆ/æ€»å®ä¾‹æ•°
   - å¹³å‡å®Œæˆæ—¶é—´ï¼ˆæ¯«ç§’ + æ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼‰

3. **ActivityNodeVO** - æ´»åŠ¨èŠ‚ç‚¹ä¿¡æ¯
   - æ´»åŠ¨IDã€åç§°ã€ç±»å‹
   - å¼€å§‹æ—¶é—´

4. **ProcessProgressVO** - æµç¨‹è¿›åº¦ä¿¡æ¯
   - æ€»èŠ‚ç‚¹æ•°ã€å·²å®ŒæˆèŠ‚ç‚¹æ•°ã€å½“å‰èŠ‚ç‚¹æ•°ã€å‰©ä½™èŠ‚ç‚¹æ•°
   - è¿›åº¦ç™¾åˆ†æ¯”ã€è¿›åº¦æè¿°

### 2. ProcessStatisticsController - æµç¨‹ç»Ÿè®¡API

**è·¯å¾„**: `/data/lingflow/backend/src/main/java/com/lingflow/controller/ProcessStatisticsController.java`

**åŸºç¡€è·¯å¾„**: `/api/statistics`

**APIåˆ—è¡¨**:

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ | è¿”å›å€¼ |
|------|------|------|--------|
| GET | `/process-instance` | è·å–æµç¨‹å®ä¾‹ç»Ÿè®¡ | ProcessInstanceStatisticsVO |
| GET | `/task` | è·å–ä»»åŠ¡ç»Ÿè®¡ | TaskStatisticsVO |
| GET | `/process-definition` | è·å–æµç¨‹å®šä¹‰ç»Ÿè®¡ | List\<ProcessDefinitionStatisticsVO\> |
| GET | `/daily` | è·å–æ¯æ—¥æµç¨‹ç»Ÿè®¡ | List\<DailyStatisticsVO\> |
| GET | `/user-task/{userId}` | è·å–ç”¨æˆ·ä»»åŠ¡ç»Ÿè®¡ | UserTaskStatisticsVO |
| GET | `/average-completion-time` | è·å–æµç¨‹å¹³å‡å®Œæˆæ—¶é—´ | AverageCompletionTimeVO |
| GET | `/trend/{days}` | è·å–æµç¨‹è¶‹åŠ¿ç»Ÿè®¡ | Map\<String, Object\> |
| GET | `/timeout/{timeoutHours}` | è·å–è¶…æ—¶æµç¨‹ç»Ÿè®¡ | TimeoutStatisticsVO |

**VOç±»**:

1. **ProcessInstanceStatisticsVO** - æµç¨‹å®ä¾‹ç»Ÿè®¡
   - æ€»å®ä¾‹æ•°ã€è¿è¡Œä¸­ã€å·²å®Œæˆã€å·²æŒ‚èµ·ã€å·²ç»ˆæ­¢æ•°
   - å®Œæˆç‡ã€å¹³å‡å®Œæˆæ—¶é—´

2. **TaskStatisticsVO** - ä»»åŠ¡ç»Ÿè®¡
   - æ€»ä»»åŠ¡æ•°ã€å¾…å¤„ç†ã€å·²å®Œæˆã€å·²é€¾æœŸæ•°
   - å¹³å‡ä»»åŠ¡å¤„ç†æ—¶é—´

3. **ProcessDefinitionStatisticsVO** - æµç¨‹å®šä¹‰ç»Ÿè®¡
   - æµç¨‹å®šä¹‰ä¿¡æ¯
   - è¿è¡Œä¸­/å·²å®Œæˆ/æ€»å®ä¾‹æ•°
   - éƒ¨ç½²æ—¶é—´

4. **DailyStatisticsVO** - æ¯æ—¥ç»Ÿè®¡
   - æ—¥æœŸ
   - å¯åŠ¨/å®Œæˆçš„æµç¨‹æ•°
   - åˆ›å»º/å®Œæˆçš„ä»»åŠ¡æ•°

5. **UserTaskStatisticsVO** - ç”¨æˆ·ä»»åŠ¡ç»Ÿè®¡
   - å¾…å¤„ç†ã€å·²å®Œæˆã€å·²é€¾æœŸä»»åŠ¡æ•°
   - å¹³å‡ä»»åŠ¡å¤„ç†æ—¶é—´

6. **AverageCompletionTimeVO** - å¹³å‡å®Œæˆæ—¶é—´
   - å¹³å‡å®Œæˆæ—¶é—´
   - æœ€å¿«/æœ€æ…¢å®Œæˆæ—¶é—´

7. **TimeoutStatisticsVO** - è¶…æ—¶ç»Ÿè®¡
   - è¶…æ—¶æµç¨‹å®ä¾‹æ•°å’ŒIDåˆ—è¡¨
   - è¶…æ—¶ä»»åŠ¡æ•°å’ŒIDåˆ—è¡¨

### 3. ProcessNotificationController - æµç¨‹é€šçŸ¥API

**è·¯å¾„**: `/data/lingflow/backend/src/main/java/com/lingflow/controller/ProcessNotificationController.java`

**åŸºç¡€è·¯å¾„**: `/api/notifications`

**APIåˆ—è¡¨**:

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ | è¿”å›å€¼ |
|------|------|------|--------|
| POST | `/task-assigned` | å‘é€ä»»åŠ¡åˆ†é…é€šçŸ¥ | String (é€šçŸ¥ID) |
| POST | `/task-completed` | å‘é€ä»»åŠ¡å®Œæˆé€šçŸ¥ | String (é€šçŸ¥ID) |
| POST | `/process-timeout` | å‘é€æµç¨‹è¶…æ—¶é€šçŸ¥ | String (é€šçŸ¥ID) |
| POST | `/process-rejected` | å‘é€æµç¨‹æ‹’ç»é€šçŸ¥ | String (é€šçŸ¥ID) |
| POST | `/process-approved` | å‘é€æµç¨‹é€šè¿‡é€šçŸ¥ | String (é€šçŸ¥ID) |
| POST | `/process-withdrawn` | å‘é€æµç¨‹æ’¤å›é€šçŸ¥ | String (é€šçŸ¥ID) |
| POST | `/task-delegated` | å‘é€ä»»åŠ¡è½¬åŠé€šçŸ¥ | String (é€šçŸ¥ID) |
| POST | `/custom` | å‘é€è‡ªå®šä¹‰é€šçŸ¥ | String (é€šçŸ¥ID) |
| GET | `/user/{userId}` | è·å–ç”¨æˆ·çš„é€šçŸ¥åˆ—è¡¨ | List\<NotificationRecordVO\> |
| GET | `/user/{userId}/unread-count` | è·å–æœªè¯»é€šçŸ¥æ•°é‡ | Long |
| POST | `/user/{userId}/read/{notificationId}` | æ ‡è®°é€šçŸ¥ä¸ºå·²è¯» | Boolean |
| POST | `/user/{userId}/read-all` | æ‰¹é‡æ ‡è®°ä¸ºå·²è¯» | Integer (æ ‡è®°æ•°é‡) |

**VOç±»**:

1. **NotificationRequest** - é€šçŸ¥è¯·æ±‚å‚æ•°
   - taskId, processInstanceId
   - assignee, initiator, fromUser, toUser
   - taskName, processName, reason
   - timeoutHours, nextAssignees

2. **CustomNotificationRequest** - è‡ªå®šä¹‰é€šçŸ¥è¯·æ±‚
   - recipientsï¼ˆæ¥æ”¶äººåˆ—è¡¨ï¼‰
   - title, content
   - processInstanceIdï¼ˆå¯é€‰ï¼‰

3. **NotificationRecordVO** - é€šçŸ¥è®°å½•
   - id, type, recipientId
   - title, content
   - processInstanceId, taskId
   - readï¼ˆæ˜¯å¦å·²è¯»ï¼‰
   - createTime, readTime

### 4. ProcessCommentController - æµç¨‹è¯„è®ºAPI

**è·¯å¾„**: `/data/lingflow/backend/src/main/java/com/lingflow/controller/ProcessCommentController.java`

**åŸºç¡€è·¯å¾„**: `/api/comments`

**APIåˆ—è¡¨**:

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ | è¿”å›å€¼ |
|------|------|------|--------|
| POST | `/process` | æ·»åŠ æµç¨‹å®ä¾‹è¯„è®º | String (è¯„è®ºID) |
| POST | `/task` | æ·»åŠ ä»»åŠ¡è¯„è®º | String (è¯„è®ºID) |
| POST | `/system` | æ·»åŠ ç³»ç»Ÿè¯„è®º | String (è¯„è®ºID) |
| GET | `/process/{processInstanceId}` | è·å–æµç¨‹å®ä¾‹çš„æ‰€æœ‰è¯„è®º | List\<CommentVO\> |
| GET | `/task/{taskId}` | è·å–ä»»åŠ¡çš„æ‰€æœ‰è¯„è®º | List\<CommentVO\> |
| GET | `/process/{processInstanceId}/all` | è·å–æµç¨‹çš„æ‰€æœ‰è¯„è®ºï¼ˆåŒ…æ‹¬ä»»åŠ¡è¯„è®ºï¼‰ | List\<CommentVO\> |
| DELETE | `/{commentId}` | åˆ é™¤è¯„è®º | Boolean |
| PUT | `/` | æ›´æ–°è¯„è®º | Boolean |
| GET | `/process/{processInstanceId}/statistics` | è·å–è¯„è®ºç»Ÿè®¡ | CommentStatisticsVO |

**VOç±»**:

1. **AddCommentRequest** - æ·»åŠ è¯„è®ºè¯·æ±‚
   - processInstanceId, taskId
   - userId, content

2. **AddSystemCommentRequest** - æ·»åŠ ç³»ç»Ÿè¯„è®ºè¯·æ±‚
   - processInstanceId, content

3. **UpdateCommentRequest** - æ›´æ–°è¯„è®ºè¯·æ±‚
   - commentId, userId, newContent

4. **CommentVO** - è¯„è®ºä¿¡æ¯
   - id, typeï¼ˆPROCESS, TASK, SYSTEMï¼‰
   - processInstanceId, taskId
   - userId, content
   - createTime, updateTime

5. **CommentStatisticsVO** - è¯„è®ºç»Ÿè®¡
   - processInstanceId
   - processCommentCount, taskCommentCount, totalCommentCount
   - participantCount

### 5. ProcessVariableController - æµç¨‹å˜é‡API

**è·¯å¾„**: `/data/lingflow/backend/src/main/java/com/lingflow/controller/ProcessVariableController.java`

**åŸºç¡€è·¯å¾„**: `/api/variables`

**APIåˆ—è¡¨**:

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ | è¿”å›å€¼ |
|------|------|------|--------|
| GET | `/process/{processInstanceId}` | è·å–æµç¨‹å®ä¾‹çš„æ‰€æœ‰å˜é‡ | Map\<String, Object\> |
| GET | `/process/{processInstanceId}/variable/{variableName}` | è·å–æµç¨‹å®ä¾‹çš„å•ä¸ªå˜é‡ | Object |
| POST | `/process` | è®¾ç½®æµç¨‹å®ä¾‹å˜é‡ | Boolean |
| PUT | `/process` | æ›´æ–°æµç¨‹å®ä¾‹å˜é‡ | Boolean |
| DELETE | `/process/{processInstanceId}/variable/{variableName}` | åˆ é™¤æµç¨‹å®ä¾‹å˜é‡ | Boolean |
| GET | `/task/{taskId}` | è·å–ä»»åŠ¡çš„æ‰€æœ‰æœ¬åœ°å˜é‡ | Map\<String, Object\> |
| GET | `/task/{taskId}/variable/{variableName}` | è·å–ä»»åŠ¡çš„å•ä¸ªæœ¬åœ°å˜é‡ | Object |
| POST | `/task` | è®¾ç½®ä»»åŠ¡æœ¬åœ°å˜é‡ | Boolean |
| PUT | `/task` | æ›´æ–°ä»»åŠ¡æœ¬åœ°å˜é‡ | Boolean |
| GET | `/history/{processInstanceId}` | è·å–å†å²å˜é‡ | List\<VariableInfoVO\> |
| GET | `/history/{processInstanceId}/variable/{variableName}` | è·å–å˜é‡çš„å†å²å˜æ›´è®°å½• | List\<VariableInfoVO\> |
| POST | `/copy` | å¤åˆ¶å˜é‡ | Boolean |

**VOç±»**:

1. **SetVariablesRequest** - è®¾ç½®å˜é‡è¯·æ±‚
   - processInstanceId
   - variablesï¼ˆå˜é‡Mapï¼‰

2. **UpdateVariableRequest** - æ›´æ–°å˜é‡è¯·æ±‚
   - processInstanceId, variableName, value

3. **SetTaskVariablesRequest** - è®¾ç½®ä»»åŠ¡å˜é‡è¯·æ±‚
   - taskId, variables

4. **UpdateTaskVariableRequest** - æ›´æ–°ä»»åŠ¡å˜é‡è¯·æ±‚
   - taskId, variableName, value

5. **CopyVariablesRequest** - å¤åˆ¶å˜é‡è¯·æ±‚
   - sourceProcessInstanceId, targetProcessInstanceId
   - variableNamesï¼ˆå¯é€‰ï¼Œä¸ºç©ºåˆ™å¤åˆ¶å…¨éƒ¨ï¼‰

6. **VariableInfoVO** - å˜é‡ä¿¡æ¯
   - variableName, value, variableType
   - createTime, lastUpdatedTime
   - processInstanceId, taskIdï¼ˆå¦‚æœæ˜¯æœ¬åœ°å˜é‡ï¼‰

---

## APIä½¿ç”¨ç¤ºä¾‹

### 1. æµç¨‹ç›‘æ§APIä½¿ç”¨ç¤ºä¾‹

```bash
# è·å–æµç¨‹å®ä¾‹ç›‘æ§ä¿¡æ¯
GET /api/monitor/process/{processInstanceId}

# å“åº”
{
  "code": 200,
  "message": "success",
  "data": {
    "processInstanceId": "xxx",
    "processDefinitionKey": "leaveProcess",
    "processDefinitionName": "è¯·å‡æµç¨‹",
    "businessKey": "BUS001",
    "startUserId": "user001",
    "startTime": "2025-01-15 10:00:00",
    "duration": 3600000,
    "formattedDuration": "1å°æ—¶",
    "status": "RUNNING",
    "activeActivityCount": 2,
    "currentTaskCount": 1,
    "progress": 50.0
  }
}

# æ£€æµ‹è¶…æ—¶æµç¨‹
GET /api/monitor/timeout/24

# è·å–æµç¨‹è¿›åº¦
GET /api/monitor/process/{processInstanceId}/progress
```

### 2. æµç¨‹ç»Ÿè®¡APIä½¿ç”¨ç¤ºä¾‹

```bash
# è·å–æµç¨‹å®ä¾‹ç»Ÿè®¡
GET /api/statistics/process-instance?processDefinitionKey=leaveProcess

# è·å–ä»»åŠ¡ç»Ÿè®¡
GET /api/statistics/task

# è·å–æ¯æ—¥ç»Ÿè®¡
GET /api/statistics/daily?startDate=2025-01-01&endDate=2025-01-15

# è·å–ç”¨æˆ·ä»»åŠ¡ç»Ÿè®¡
GET /api/statistics/user-task/user001

# è·å–æµç¨‹è¶‹åŠ¿
GET /api/statistics/trend/7
```

### 3. æµç¨‹é€šçŸ¥APIä½¿ç”¨ç¤ºä¾‹

```bash
# å‘é€ä»»åŠ¡åˆ†é…é€šçŸ¥
POST /api/notifications/task-assigned
{
  "taskId": "task001",
  "assignee": "user001",
  "taskName": "éƒ¨é—¨å®¡æ‰¹"
}

# å‘é€è‡ªå®šä¹‰é€šçŸ¥
POST /api/notifications/custom
{
  "recipients": ["user001", "user002"],
  "title": "é‡è¦æé†’",
  "content": "è¯·åŠæ—¶å¤„ç†æµç¨‹",
  "processInstanceId": "xxx"
}

# è·å–ç”¨æˆ·é€šçŸ¥
GET /api/notifications/user/user001?limit=20

# è·å–æœªè¯»æ•°é‡
GET /api/notifications/user/user001/unread-count

# æ ‡è®°ä¸ºå·²è¯»
POST /api/notifications/user/user001/read/notification001

# æ‰¹é‡æ ‡è®°ä¸ºå·²è¯»
POST /api/notifications/user/user001/read-all
```

### 4. æµç¨‹è¯„è®ºAPIä½¿ç”¨ç¤ºä¾‹

```bash
# æ·»åŠ æµç¨‹è¯„è®º
POST /api/comments/process
{
  "processInstanceId": "xxx",
  "userId": "user001",
  "content": "è¯·å°½å¿«å¤„ç†"
}

# æ·»åŠ ä»»åŠ¡è¯„è®º
POST /api/comments/task
{
  "taskId": "task001",
  "userId": "user001",
  "content": "å·²å®¡æ ¸é€šè¿‡"
}

# è·å–æµç¨‹çš„æ‰€æœ‰è¯„è®ºï¼ˆåŒ…æ‹¬ä»»åŠ¡è¯„è®ºï¼‰
GET /api/comments/process/xxx/all

# æ›´æ–°è¯„è®º
PUT /api/comments/
{
  "commentId": "comment001",
  "userId": "user001",
  "newContent": "ä¿®æ”¹åçš„å†…å®¹"
}

# åˆ é™¤è¯„è®º
DELETE /api/comments/comment001?userId=user001

# è·å–è¯„è®ºç»Ÿè®¡
GET /api/comments/process/xxx/statistics
```

### 5. æµç¨‹å˜é‡APIä½¿ç”¨ç¤ºä¾‹

```bash
# è·å–æµç¨‹å®ä¾‹çš„æ‰€æœ‰å˜é‡
GET /api/variables/process/xxx

# è·å–å•ä¸ªå˜é‡
GET /api/variables/process/xxx/variable/approvalResult

# è®¾ç½®æµç¨‹å˜é‡
POST /api/variables/process
{
  "processInstanceId": "xxx",
  "variables": {
    "approvalResult": "approved",
    "approver": "user001"
  }
}

# æ›´æ–°æµç¨‹å˜é‡
PUT /api/variables/process
{
  "processInstanceId": "xxx",
  "variableName": "approvalResult",
  "value": "rejected"
}

# åˆ é™¤æµç¨‹å˜é‡
DELETE /api/variables/process/xxx/variable/approvalResult

# è·å–ä»»åŠ¡æœ¬åœ°å˜é‡
GET /api/variables/task/task001

# è®¾ç½®ä»»åŠ¡æœ¬åœ°å˜é‡
POST /api/variables/task
{
  "taskId": "task001",
  "variables": {
    "localVar": "value"
  }
}

# è·å–å†å²å˜é‡
GET /api/variables/history/xxx

# è·å–å˜é‡çš„å†å²å˜æ›´è®°å½•
GET /api/variables/history/xxx/variable/approvalResult

# å¤åˆ¶å˜é‡
POST /api/variables/copy
{
  "sourceProcessInstanceId": "source001",
  "targetProcessInstanceId": "target001",
  "variableNames": ["var1", "var2"]
}
```

---

## æ–‡ä»¶æ¸…å•

### åˆ›å»ºçš„æ–‡ä»¶

```
backend/src/main/java/com/lingflow/controller/
â”œâ”€â”€ ProcessMonitorController.java         # æµç¨‹ç›‘æ§API
â”œâ”€â”€ ProcessStatisticsController.java      # æµç¨‹ç»Ÿè®¡API
â”œâ”€â”€ ProcessNotificationController.java    # æµç¨‹é€šçŸ¥API
â”œâ”€â”€ ProcessCommentController.java         # æµç¨‹è¯„è®ºAPI
â””â”€â”€ ProcessVariableController.java        # æµç¨‹å˜é‡API
```

### å·²æœ‰çš„Controller

```
backend/src/main/java/com/lingflow/controller/
â”œâ”€â”€ ProcessController.java               # æµç¨‹ç®¡ç†API
â”œâ”€â”€ SnapshotController.java              # å¿«ç…§ç®¡ç†API
â””â”€â”€ TaskController.java                  # ä»»åŠ¡ç®¡ç†API
```

---

## APIè®¾è®¡è§„èŒƒ

### 1. RESTfulé£æ ¼

- ä½¿ç”¨HTTPæ–¹æ³•è¯­ä¹‰ï¼šGETï¼ˆæŸ¥è¯¢ï¼‰ã€POSTï¼ˆåˆ›å»ºï¼‰ã€PUTï¼ˆæ›´æ–°ï¼‰ã€DELETEï¼ˆåˆ é™¤ï¼‰
- èµ„æºè·¯å¾„æ¸…æ™°ï¼š`/api/{resource}/{id}`
- ä½¿ç”¨åè¯å¤æ•°ï¼š`/notifications`ã€`/comments`ã€`/variables`

### 2. ç»Ÿä¸€å“åº”æ ¼å¼

æ‰€æœ‰APIè¿”å›ç»Ÿä¸€çš„å“åº”æ ¼å¼ï¼š

```json
{
  "code": 200,
  "message": "success",
  "data": {...}
}
```

### 3. è·¯å¾„å‚æ•°

- ä½¿ç”¨`@PathVariable`è·å–è·¯å¾„å‚æ•°
- ä½¿ç”¨`@RequestParam`è·å–æŸ¥è¯¢å‚æ•°
- ä½¿ç”¨`@RequestBody`è·å–è¯·æ±‚ä½“

### 4. å¼‚å¸¸å¤„ç†

- æ‰€æœ‰APIéƒ½åŒ…å«try-catchå¼‚å¸¸å¤„ç†
- å¼‚å¸¸æ—¶è¿”å›é”™è¯¯ä¿¡æ¯

### 5. VOç±»è®¾è®¡

- æ¯ä¸ªControllerå†…éƒ¨å®šä¹‰VOç±»
- VOç±»ä½¿ç”¨Lombokæ³¨è§£ç®€åŒ–ä»£ç 
- VOç±»å‘½åæ¸…æ™°ï¼Œä½“ç°ä¸šåŠ¡å«ä¹‰

---

## æŠ€æœ¯äº®ç‚¹

### 1. å®Œæ•´çš„CRUDæ“ä½œ

æ¯ä¸ªAPIéƒ½æä¾›äº†å®Œæ•´çš„å¢åˆ æ”¹æŸ¥æ“ä½œï¼š
- ç›‘æ§ï¼šæŸ¥è¯¢æµç¨‹å®ä¾‹ã€æµç¨‹å®šä¹‰ã€æ´»åŠ¨èŠ‚ç‚¹ã€è¿›åº¦
- ç»Ÿè®¡ï¼šå¤šç»´åº¦çš„ç»Ÿè®¡åˆ†æ
- é€šçŸ¥ï¼šå‘é€ã€æŸ¥è¯¢ã€æ ‡è®°å·²è¯»
- è¯„è®ºï¼šæ·»åŠ ã€æŸ¥è¯¢ã€æ›´æ–°ã€åˆ é™¤ã€ç»Ÿè®¡
- å˜é‡ï¼šè·å–ã€è®¾ç½®ã€æ›´æ–°ã€åˆ é™¤ã€å†å²æŸ¥è¯¢ã€å¤åˆ¶

### 2. ä¸°å¯Œçš„æŸ¥è¯¢åŠŸèƒ½

- æ”¯æŒå•ä¸ªæŸ¥è¯¢
- æ”¯æŒåˆ—è¡¨æŸ¥è¯¢
- æ”¯æŒåˆ†é¡µæŸ¥è¯¢ï¼ˆé€šè¿‡limitå‚æ•°ï¼‰
- æ”¯æŒæ¡ä»¶è¿‡æ»¤ï¼ˆé€šè¿‡æŸ¥è¯¢å‚æ•°ï¼‰

### 3. å†å²æ•°æ®æ”¯æŒ

- å˜é‡å†å²æŸ¥è¯¢
- å˜é‡å˜æ›´è®°å½•æŸ¥è¯¢
- æµç¨‹å®ä¾‹å†å²æ•°æ®æŸ¥è¯¢

### 4. æ‰¹é‡æ“ä½œæ”¯æŒ

- æ‰¹é‡æ ‡è®°é€šçŸ¥ä¸ºå·²è¯»
- æ‰¹é‡è®¾ç½®å˜é‡
- æ‰¹é‡å¤åˆ¶å˜é‡

### 5. ç»Ÿè®¡åˆ†æåŠŸèƒ½

- æµç¨‹å®ä¾‹ç»Ÿè®¡
- ä»»åŠ¡ç»Ÿè®¡
- ç”¨æˆ·ä»»åŠ¡ç»Ÿè®¡
- æ¯æ—¥ç»Ÿè®¡
- è¶‹åŠ¿åˆ†æ
- è¶…æ—¶ç»Ÿè®¡

---

## ä¸å‰ç«¯çš„é›†æˆ

### 1. APIè·¯å¾„è®¾è®¡

æ‰€æœ‰APIä½¿ç”¨`/api`å‰ç¼€ï¼Œä¾¿äºï¼š
- ç»Ÿä¸€ç®¡ç†
- è·¯ç”±é…ç½®
- æƒé™æ§åˆ¶
- ç‰ˆæœ¬ç®¡ç†

### 2. æ•°æ®æ ¼å¼

- ä½¿ç”¨JSONæ ¼å¼
- æ—¥æœŸä½¿ç”¨å­—ç¬¦ä¸²æ ¼å¼
- æ”¯æŒå¤æ‚æ•°æ®ç±»å‹ï¼ˆMapã€Listï¼‰

### 3. é”™è¯¯å¤„ç†

- ç»Ÿä¸€çš„é”™è¯¯å“åº”æ ¼å¼
- è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯
- ä¾¿äºå‰ç«¯æ˜¾ç¤ºé”™è¯¯æç¤º

### 4. å‰ç«¯è°ƒç”¨ç¤ºä¾‹

```typescript
// è·å–æµç¨‹ç›‘æ§ä¿¡æ¯
const getProcessMonitor = async (processInstanceId: string) => {
  const response = await fetch(
    `/api/monitor/process/${processInstanceId}`
  );
  const result = await response.json();
  return result.data;
};

// å‘é€é€šçŸ¥
const sendNotification = async (data: NotificationRequest) => {
  const response = await fetch('/api/notifications/task-assigned', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify(data)
  });
  const result = await response.json();
  return result.data;
};

// è·å–æµç¨‹å˜é‡
const getProcessVariables = async (processInstanceId: string) => {
  const response = await fetch(
    `/api/variables/process/${processInstanceId}`
  );
  const result = await response.json();
  return result.data;
};
```

---

## æ€»ç»“

âœ… **ProcessMonitorController å·²å®ç°**
- 6ä¸ªç›‘æ§APIæ¥å£
- æ”¯æŒæµç¨‹å®ä¾‹ã€æµç¨‹å®šä¹‰ã€æ´»åŠ¨èŠ‚ç‚¹ã€è¿›åº¦ç›‘æ§
- æ”¯æŒè¶…æ—¶æ£€æµ‹

âœ… **ProcessStatisticsController å·²å®ç°**
- 8ä¸ªç»Ÿè®¡APIæ¥å£
- æ”¯æŒå¤šç»´åº¦ç»Ÿè®¡åˆ†æ
- æ”¯æŒè¶‹åŠ¿åˆ†æå’Œæ¯æ—¥ç»Ÿè®¡

âœ… **ProcessNotificationController å·²å®ç°**
- 12ä¸ªé€šçŸ¥APIæ¥å£
- æ”¯æŒ8ç§é€šçŸ¥ç±»å‹
- æ”¯æŒé€šçŸ¥æŸ¥è¯¢å’Œå·²è¯»æ ‡è®°

âœ… **ProcessCommentController å·²å®ç°**
- 9ä¸ªè¯„è®ºAPIæ¥å£
- æ”¯æŒæµç¨‹ã€ä»»åŠ¡ã€ç³»ç»Ÿä¸‰ç§è¯„è®ºç±»å‹
- æ”¯æŒè¯„è®ºçš„å¢åˆ æ”¹æŸ¥å’Œç»Ÿè®¡

âœ… **ProcessVariableController å·²å®ç°**
- 11ä¸ªå˜é‡APIæ¥å£
- æ”¯æŒæµç¨‹å˜é‡å’Œä»»åŠ¡æœ¬åœ°å˜é‡
- æ”¯æŒå†å²æŸ¥è¯¢å’Œå˜é‡å¤åˆ¶

ğŸ¯ **APIæ¥å£å±‚å·²å®Œæˆï¼**
- 5ä¸ªæ–°Controller
- 46ä¸ªAPIæ¥å£
- å®Œæ•´çš„CRUDæ“ä½œ
- ç»Ÿä¸€çš„å“åº”æ ¼å¼
- è¯¦ç»†çš„VOå®šä¹‰

ğŸ“ **åç»­å»ºè®®**:
1. å‰ç«¯è°ƒç”¨è¿™äº›APIè¿›è¡Œé¡µé¢å¼€å‘
2. æ·»åŠ APIæƒé™æ§åˆ¶
3. æ·»åŠ APIæ–‡æ¡£ï¼ˆSwaggerï¼‰
4. æ·»åŠ APIå•å…ƒæµ‹è¯•
5. æ·»åŠ APIæ€§èƒ½ç›‘æ§
6. ç»§ç»­æ‰§è¡Œå…¶ä»–æ¨¡å—å¼€å‘

ğŸ‰ **ä¸šåŠ¡APIæ¥å£å±‚å®ç°å·²å®Œæˆï¼**
- æ‰©å±•æ¡†æ¶çš„æ‰€æœ‰æœåŠ¡éƒ½å·²æš´éœ²ä¸ºAPI
- æä¾›å®Œæ•´çš„ä¸šåŠ¡åŠŸèƒ½æ¥å£
- æ”¯æŒå‰ç«¯é›†æˆå’Œè°ƒç”¨
