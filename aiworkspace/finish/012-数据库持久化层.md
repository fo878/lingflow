# æ‰§è¡Œè®°å½•ï¼šæ•°æ®åº“æŒä¹…åŒ–å±‚

> æ‰§è¡Œæ—¶é—´ï¼š2025-01-15
> çŠ¶æ€ï¼šå·²å®Œæˆ

## ä»»åŠ¡æ¦‚è¿°

ä¸ºé€šçŸ¥å’Œè¯„è®ºåŠŸèƒ½æ·»åŠ æ•°æ®åº“æŒä¹…åŒ–æ”¯æŒï¼Œæ›¿ä»£åŸæœ‰çš„å†…å­˜å­˜å‚¨ï¼Œç¡®ä¿æ•°æ®å¯é æ€§å’Œå¯æ‰©å±•æ€§ã€‚

---

## å·²åˆ›å»ºçš„æ–‡ä»¶

### 1. å®ä½“ç±»ï¼ˆEntityï¼‰

#### NotificationRecord.java
**è·¯å¾„**: `/data/lingflow/backend/src/main/java/com/lingflow/entity/NotificationRecord.java`

**åŠŸèƒ½**: é€šçŸ¥è®°å½•å®ä½“ç±»ï¼Œç”¨äºå­˜å‚¨æµç¨‹ç›¸å…³çš„é€šçŸ¥è®°å½•

**è¡¨ç»“æ„**:
```sql
CREATE TABLE lf_notification_record (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    notification_id VARCHAR(64) UNIQUE NOT NULL,
    type VARCHAR(32) NOT NULL,
    recipient_id VARCHAR(64) NOT NULL,
    recipient_name VARCHAR(128),
    title VARCHAR(256) NOT NULL,
    content TEXT,
    process_instance_id VARCHAR(64),
    process_definition_id VARCHAR(64),
    process_definition_key VARCHAR(128),
    process_name VARCHAR(256),
    task_id VARCHAR(64),
    task_name VARCHAR(256),
    is_read BOOLEAN NOT NULL DEFAULT FALSE,
    read_time TIMESTAMP,
    create_time TIMESTAMP NOT NULL,
    update_time TIMESTAMP NOT NULL,
    extra_data TEXT,

    INDEX idx_recipient_id (recipient_id),
    INDEX idx_process_instance_id (process_instance_id),
    INDEX idx_task_id (task_id),
    INDEX idx_type (type),
    INDEX idx_read (is_read),
    INDEX idx_create_time (create_time)
);
```

**å­—æ®µè¯´æ˜**:
- `notification_id`: é€šçŸ¥UUIDï¼Œå”¯ä¸€æ ‡è¯†
- `type`: é€šçŸ¥ç±»å‹ï¼ˆTASK_ASSIGNEDã€TASK_COMPLETEDç­‰8ç§ï¼‰
- `recipient_id`: æ¥æ”¶äººID
- `title`: é€šçŸ¥æ ‡é¢˜
- `content`: é€šçŸ¥å†…å®¹
- `process_instance_id`: å…³è”çš„æµç¨‹å®ä¾‹ID
- `task_id`: å…³è”çš„ä»»åŠ¡ID
- `is_read`: æ˜¯å¦å·²è¯»
- `read_time`: è¯»å–æ—¶é—´
- `extra_data`: æ‰©å±•æ•°æ®ï¼ˆJSONæ ¼å¼ï¼‰

#### ProcessComment.java
**è·¯å¾„**: `/data/lingflow/backend/src/main/java/com/lingflow/entity/ProcessComment.java`

**åŠŸèƒ½**: æµç¨‹è¯„è®ºå®ä½“ç±»ï¼Œç”¨äºå­˜å‚¨æµç¨‹å®ä¾‹å’Œä»»åŠ¡çš„è¯„è®º

**è¡¨ç»“æ„**:
```sql
CREATE TABLE lf_process_comment (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    comment_id VARCHAR(64) UNIQUE NOT NULL,
    type VARCHAR(16) NOT NULL,
    process_instance_id VARCHAR(64),
    process_definition_id VARCHAR(64),
    task_id VARCHAR(64),
    task_name VARCHAR(256),
    user_id VARCHAR(64),
    user_name VARCHAR(128),
    content TEXT NOT NULL,
    parent_id VARCHAR(64),
    is_deleted BOOLEAN NOT NULL DEFAULT FALSE,
    create_time TIMESTAMP NOT NULL,
    update_time TIMESTAMP NOT NULL,
    delete_time TIMESTAMP,
    extra_data TEXT,

    INDEX idx_process_instance_id (process_instance_id),
    INDEX idx_task_id (task_id),
    INDEX idx_user_id (user_id),
    INDEX idx_type (type),
    INDEX idx_create_time (create_time)
);
```

**å­—æ®µè¯´æ˜**:
- `comment_id`: è¯„è®ºUUIDï¼Œå”¯ä¸€æ ‡è¯†
- `type`: è¯„è®ºç±»å‹ï¼ˆPROCESSã€TASKã€SYSTEMï¼‰
- `process_instance_id`: æµç¨‹å®ä¾‹ID
- `task_id`: ä»»åŠ¡ID
- `user_id`: ç”¨æˆ·ID
- `content`: è¯„è®ºå†…å®¹
- `parent_id`: çˆ¶è¯„è®ºIDï¼ˆæ”¯æŒå›å¤åŠŸèƒ½ï¼‰
- `is_deleted`: æ˜¯å¦å·²åˆ é™¤ï¼ˆé€»è¾‘åˆ é™¤ï¼‰
- `delete_time`: åˆ é™¤æ—¶é—´

### 2. æ•°æ®è®¿é—®æ¥å£ï¼ˆRepositoryï¼‰

#### NotificationRecordRepository.java
**è·¯å¾„**: `/data/lingflow/backend/src/main/java/com/lingflow/repository/NotificationRecordRepository.java`

**åŠŸèƒ½**: é€šçŸ¥è®°å½•æ•°æ®è®¿é—®æ¥å£ï¼Œç»§æ‰¿JpaRepository

**ä¸»è¦æ–¹æ³•**:
| æ–¹æ³• | è¯´æ˜ |
|------|------|
| findByNotificationId | æ ¹æ®é€šçŸ¥UUIDæŸ¥è¯¢ |
| findByRecipientIdOrderByCreateTimeDesc | æ ¹æ®æ¥æ”¶äººIDæŸ¥è¯¢é€šçŸ¥åˆ—è¡¨ |
| findByRecipientIdWithLimit | æŸ¥è¯¢ç”¨æˆ·é€šçŸ¥ï¼ˆé™åˆ¶æ•°é‡ï¼‰ |
| countByRecipientIdAndIsRead | ç»Ÿè®¡ç”¨æˆ·æœªè¯»é€šçŸ¥æ•°é‡ |
| findByProcessInstanceIdOrderByCreateTimeDesc | æ ¹æ®æµç¨‹å®ä¾‹IDæŸ¥è¯¢é€šçŸ¥ |
| findByTaskIdOrderByCreateTimeDesc | æ ¹æ®ä»»åŠ¡IDæŸ¥è¯¢é€šçŸ¥ |
| markAsRead | æ ‡è®°é€šçŸ¥ä¸ºå·²è¯» |
| markAllAsReadForUser | æ‰¹é‡æ ‡è®°ç”¨æˆ·é€šçŸ¥ä¸ºå·²è¯» |
| deleteByNotificationId | åˆ é™¤é€šçŸ¥ |
| deleteByCreateTimeBefore | åˆ é™¤æŒ‡å®šæ—¶é—´ä¹‹å‰çš„é€šçŸ¥ |

**ç‰¹ç‚¹**:
- ä½¿ç”¨Spring Data JPAè§„èŒƒå‘½å
- æ”¯æŒè‡ªå®šä¹‰æŸ¥è¯¢ï¼ˆ@Queryæ³¨è§£ï¼‰
- æ”¯æŒæ‰¹é‡æ›´æ–°ï¼ˆ@Modifyingæ³¨è§£ï¼‰

#### ProcessCommentRepository.java
**è·¯å¾„**: `/data/lingflow/backend/src/main/java/com/lingflow/repository/ProcessCommentRepository.java`

**åŠŸèƒ½**: æµç¨‹è¯„è®ºæ•°æ®è®¿é—®æ¥å£ï¼Œç»§æ‰¿JpaRepository

**ä¸»è¦æ–¹æ³•**:
| æ–¹æ³• | è¯´æ˜ |
|------|------|
| findByCommentId | æ ¹æ®è¯„è®ºUUIDæŸ¥è¯¢ |
| findByProcessInstanceIdAndIsDeletedOrderByCreateTimeAsc | æŸ¥è¯¢æµç¨‹è¯„è®ºï¼ˆä¸åŒ…æ‹¬å·²åˆ é™¤ï¼‰ |
| findAllByProcessInstanceId | æŸ¥è¯¢æµç¨‹æ‰€æœ‰è¯„è®ºï¼ˆåŒ…æ‹¬ä»»åŠ¡è¯„è®ºï¼‰ |
| findByTaskIdAndIsDeletedOrderByCreateTimeAsc | æŸ¥è¯¢ä»»åŠ¡è¯„è®ºï¼ˆä¸åŒ…æ‹¬å·²åˆ é™¤ï¼‰ |
| countByProcessInstanceIdAndIsDeleted | ç»Ÿè®¡æµç¨‹è¯„è®ºæ•°é‡ |
| countByProcessInstanceIdAndTypeAndIsDeleted | ç»Ÿè®¡æŒ‡å®šç±»å‹è¯„è®ºæ•°é‡ |
| updateContent | æ›´æ–°è¯„è®ºå†…å®¹ |
| logicalDelete | é€»è¾‘åˆ é™¤è¯„è®º |
| physicalDelete | ç‰©ç†åˆ é™¤è¯„è®º |
| findTaskIdsByProcessInstanceId | æŸ¥è¯¢æµç¨‹çš„æ‰€æœ‰ä»»åŠ¡ID |
| countParticipantUsers | ç»Ÿè®¡å‚ä¸è¯„è®ºçš„ç”¨æˆ·æ•° |

**ç‰¹ç‚¹**:
- æ”¯æŒé€»è¾‘åˆ é™¤
- æ”¯æŒçˆ¶å­è¯„è®ºå…³ç³»
- æ”¯æŒç»Ÿè®¡æŸ¥è¯¢

### 3. æœåŠ¡å±‚æ›´æ–°

#### ProcessNotificationService.java
**æ›´æ–°å†…å®¹**: å®Œå…¨é‡å†™ï¼Œä½¿ç”¨æ•°æ®åº“æŒä¹…åŒ–æ›¿ä»£å†…å­˜å­˜å‚¨

**ä¸»è¦å˜æ›´**:
1. **ç§»é™¤å†…å­˜å­˜å‚¨**ï¼š
   ```java
   // åˆ é™¤
   private final Map<String, List<NotificationRecord>> notificationRecords = new ConcurrentHashMap<>();
   ```

2. **æ³¨å…¥Repository**ï¼š
   ```java
   @Autowired
   private NotificationRecordRepository notificationRecordRepository;
   ```

3. **æ·»åŠ äº‹åŠ¡æ”¯æŒ**ï¼š
   ```java
   @Transactional
   public String sendTaskAssignedNotification(...) {
       // ä¿å­˜åˆ°æ•°æ®åº“
       NotificationRecord saved = notificationRecordRepository.save(record);
       return saved.getNotificationId();
   }
   ```

4. **æŸ¥è¯¢æ–¹æ³•å®ç°**ï¼š
   ```java
   public List<NotificationRecordVO> getUserNotifications(String userId, int limit) {
       List<NotificationRecord> records =
           notificationRecordRepository.findByRecipientIdWithLimit(userId, limit);
       // è½¬æ¢ä¸ºVO
   }
   ```

5. **æ ‡è®°å·²è¯»å®ç°**ï¼š
   ```java
   @Transactional
   public boolean markNotificationAsRead(String userId, String notificationId) {
       int updated = notificationRecordRepository.markAsRead(notificationId, LocalDateTime.now());
       return updated > 0;
   }
   ```

#### ProcessCommentService.java
**æ›´æ–°å†…å®¹**: å®Œå…¨é‡å†™ï¼Œä½¿ç”¨æ•°æ®åº“æŒä¹…åŒ–æ›¿ä»£å†…å­˜å­˜å‚¨

**ä¸»è¦å˜æ›´**:
1. **ç§»é™¤å†…å­˜å­˜å‚¨**ï¼š
   ```java
   // åˆ é™¤
   private final Map<String, List<Comment>> processComments = new ConcurrentHashMap<>();
   private final Map<String, List<Comment>> taskComments = new ConcurrentHashMap<>();
   ```

2. **æ³¨å…¥Repository**ï¼š
   ```java
   @Autowired
   private ProcessCommentRepository processCommentRepository;
   ```

3. **æ·»åŠ äº‹åŠ¡æ”¯æŒ**ï¼š
   ```java
   @Transactional
   public String addProcessComment(...) {
       ProcessComment comment = new ProcessComment(CommentType.PROCESS.name(), content);
       ProcessComment saved = processCommentRepository.save(comment);
       return saved.getCommentId();
   }
   ```

4. **é€»è¾‘åˆ é™¤å®ç°**ï¼š
   ```java
   @Transactional
   public boolean deleteComment(String commentId, String userId) {
       // æ£€æŸ¥æƒé™
       int updated = processCommentRepository.logicalDelete(commentId, LocalDateTime.now());
       return updated > 0;
   }
   ```

5. **æ›´æ–°è¯„è®ºå®ç°**ï¼š
   ```java
   @Transactional
   public boolean updateComment(String commentId, String userId, String newContent) {
       // æ£€æŸ¥æƒé™
       int updated = processCommentRepository.updateContent(commentId, newContent, LocalDateTime.now());
       return updated > 0;
   }
   ```

6. **ç»Ÿè®¡æŸ¥è¯¢å®ç°**ï¼š
   ```java
   public CommentStatistics getCommentStatistics(String processInstanceId) {
       Long processCommentCount = processCommentRepository.countByProcessInstanceIdAndTypeAndIsDeleted(...);
       Long participantCount = processCommentRepository.countParticipantUsers(processInstanceId);
       // ...
   }
   ```

---

## æŠ€æœ¯äº®ç‚¹

### 1. JPAè§„èŒƒ
- ä½¿ç”¨Spring Data JPAæ ‡å‡†
- Entityä½¿ç”¨JPAæ³¨è§£ï¼ˆ@Entityã€@Tableã€@Columnç­‰ï¼‰
- Repositoryç»§æ‰¿JpaRepository
- è‡ªåŠ¨ç”ŸæˆCRUDæ–¹æ³•

### 2. ç´¢å¼•ä¼˜åŒ–
- ä¸ºå¸¸ç”¨æŸ¥è¯¢å­—æ®µæ·»åŠ ç´¢å¼•
- å¤åˆç´¢å¼•ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½
- å”¯ä¸€ç´¢å¼•ä¿è¯æ•°æ®å®Œæ•´æ€§

### 3. äº‹åŠ¡ç®¡ç†
- ä½¿ç”¨@Transactionalæ³¨è§£
- ç¡®ä¿æ•°æ®ä¸€è‡´æ€§
- æ”¯æŒäº‹åŠ¡å›æ»š

### 4. é€»è¾‘åˆ é™¤
- ä½¿ç”¨is_deletedå­—æ®µæ ‡è®°åˆ é™¤
- ä¿ç•™æ•°æ®å†å²
- æ”¯æŒæ•°æ®æ¢å¤

### 5. æƒé™æ§åˆ¶
- åˆ é™¤è¯„è®ºï¼šæ£€æŸ¥æ˜¯å¦ä¸ºåˆ›å»ºè€…æˆ–ç®¡ç†å‘˜
- æ›´æ–°è¯„è®ºï¼šæ£€æŸ¥æ˜¯å¦ä¸ºåˆ›å»ºè€…
- å¯æ‰©å±•ä¸ºé›†æˆå®é™…æƒé™ç³»ç»Ÿ

### 6. æ—¶é—´æˆ³è‡ªåŠ¨ç®¡ç†
- @CreationTimestampè‡ªåŠ¨è®¾ç½®åˆ›å»ºæ—¶é—´
- @UpdateTimestampè‡ªåŠ¨æ›´æ–°ä¿®æ”¹æ—¶é—´
- Hibernateæ‰©å±•æ³¨è§£

### 7. UUIDä¸»é”®
- ä½¿ç”¨UUIDä½œä¸ºä¸šåŠ¡ä¸»é”®
- è‡ªå¢IDä½œä¸ºæ•°æ®åº“ä¸»é”®
- é¿å…æš´éœ²å†…éƒ¨ID

---

## æ•°æ®åº“è¿ç§»

### PostgreSQLå»ºè¡¨è„šæœ¬

```sql
-- é€šçŸ¥è®°å½•è¡¨
CREATE TABLE lf_notification_record (
    id BIGSERIAL PRIMARY KEY,
    notification_id VARCHAR(64) UNIQUE NOT NULL,
    type VARCHAR(32) NOT NULL,
    recipient_id VARCHAR(64) NOT NULL,
    recipient_name VARCHAR(128),
    title VARCHAR(256) NOT NULL,
    content TEXT,
    process_instance_id VARCHAR(64),
    process_definition_id VARCHAR(64),
    process_definition_key VARCHAR(128),
    process_name VARCHAR(256),
    task_id VARCHAR(64),
    task_name VARCHAR(256),
    is_read BOOLEAN NOT NULL DEFAULT FALSE,
    read_time TIMESTAMP,
    create_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    update_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    extra_data TEXT
);

CREATE INDEX idx_notification_recipient ON lf_notification_record(recipient_id);
CREATE INDEX idx_notification_process_instance ON lf_notification_record(process_instance_id);
CREATE INDEX idx_notification_task ON lf_notification_record(task_id);
CREATE INDEX idx_notification_type ON lf_notification_record(type);
CREATE INDEX idx_notification_read ON lf_notification_record(is_read);
CREATE INDEX idx_notification_create_time ON lf_notification_record(create_time);

-- æµç¨‹è¯„è®ºè¡¨
CREATE TABLE lf_process_comment (
    id BIGSERIAL PRIMARY KEY,
    comment_id VARCHAR(64) UNIQUE NOT NULL,
    type VARCHAR(16) NOT NULL,
    process_instance_id VARCHAR(64),
    process_definition_id VARCHAR(64),
    task_id VARCHAR(64),
    task_name VARCHAR(256),
    user_id VARCHAR(64),
    user_name VARCHAR(128),
    content TEXT NOT NULL,
    parent_id VARCHAR(64),
    is_deleted BOOLEAN NOT NULL DEFAULT FALSE,
    create_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    update_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    delete_time TIMESTAMP,
    extra_data TEXT
);

CREATE INDEX idx_comment_process_instance ON lf_process_comment(process_instance_id);
CREATE INDEX idx_comment_task ON lf_process_comment(task_id);
CREATE INDEX idx_comment_user ON lf_process_comment(user_id);
CREATE INDEX idx_comment_type ON lf_process_comment(type);
CREATE INDEX idx_comment_create_time ON lf_process_comment(create_time);

-- æ›´æ–°æ—¶é—´è§¦å‘å™¨ï¼ˆå¯é€‰ï¼‰
CREATE OR REPLACE FUNCTION update_modified_time()
RETURNS TRIGGER AS $$
BEGIN
    NEW.update_time = CURRENT_TIMESTAMP;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER update_notification_modtime
BEFORE UPDATE ON lf_notification_record
FOR EACH ROW EXECUTE FUNCTION update_modified_time();

CREATE TRIGGER update_comment_modtime
BEFORE UPDATE ON lf_process_comment
FOR EACH ROW EXECUTE FUNCTION update_modified_time();
```

---

## æ–‡ä»¶æ¸…å•

### åˆ›å»ºçš„æ–‡ä»¶

```
backend/src/main/java/com/lingflow/
â”œâ”€â”€ entity/
â”‚   â”œâ”€â”€ NotificationRecord.java       # é€šçŸ¥è®°å½•å®ä½“ç±»
â”‚   â””â”€â”€ ProcessComment.java           # æµç¨‹è¯„è®ºå®ä½“ç±»
â””â”€â”€ repository/
    â”œâ”€â”€ NotificationRecordRepository.java    # é€šçŸ¥è®°å½•Repository
    â””â”€â”€ ProcessCommentRepository.java       # æµç¨‹è¯„è®ºRepository
```

### æ›´æ–°çš„æ–‡ä»¶

```
backend/src/main/java/com/lingflow/service/
â”œâ”€â”€ ProcessNotificationService.java    # æ›´æ–°ä¸ºä½¿ç”¨æ•°æ®åº“
â””â”€â”€ ProcessCommentService.java        # æ›´æ–°ä¸ºä½¿ç”¨æ•°æ®åº“
```

---

## æ•°æ®ä¸€è‡´æ€§ä¿è¯

### 1. äº‹åŠ¡è¾¹ç•Œ
- æ¯ä¸ªæ•°æ®åº“æ“ä½œéƒ½åœ¨äº‹åŠ¡ä¸­æ‰§è¡Œ
- ä¿®æ”¹æ“ä½œä½¿ç”¨@Transactional
- æŸ¥è¯¢æ“ä½œå¯ä½¿ç”¨@Transactional(readOnly = true)

### 2. å¼‚å¸¸å¤„ç†
- try-catchæ•è·å¼‚å¸¸
- è®°å½•é”™è¯¯æ—¥å¿—
- è¿”å›æ“ä½œç»“æœ

### 3. çº§è”æ“ä½œ
- åˆ é™¤æµç¨‹æ—¶çº§è”åˆ é™¤ç›¸å…³è¯„è®ºï¼ˆå¯é€‰ï¼‰
- åˆ é™¤ä»»åŠ¡æ—¶ä¿ç•™è¯„è®ºè®°å½•
- æµç¨‹åˆ é™¤æ—¶é€šçŸ¥è®°å½•ä¿ç•™

### 4. æ•°æ®æ¸…ç†
- å®šæœŸæ¸…ç†è¿‡æœŸé€šçŸ¥
- å®šæœŸç‰©ç†åˆ é™¤å·²åˆ é™¤çš„è¯„è®º
- å¯ä½¿ç”¨å®šæ—¶ä»»åŠ¡å®ç°

---

## æ€§èƒ½ä¼˜åŒ–

### 1. æ‰¹é‡æ“ä½œ
- ä½¿ç”¨æ‰¹é‡æŸ¥è¯¢å‡å°‘æ•°æ®åº“è®¿é—®
- ä½¿ç”¨æ‰¹é‡æ’å…¥æé«˜æ€§èƒ½
- ä½¿ç”¨æ‰¹é‡æ›´æ–°å‡å°‘äº‹åŠ¡æ¬¡æ•°

### 2. ç¼“å­˜ç­–ç•¥
- å¯æ·»åŠ Redisç¼“å­˜çƒ­ç‚¹æ•°æ®
- ç¼“å­˜ç”¨æˆ·æœªè¯»é€šçŸ¥æ•°é‡
- ç¼“å­˜è¯„è®ºç»Ÿè®¡ä¿¡æ¯

### 3. åˆ†é¡µæŸ¥è¯¢
- å¤§æ•°æ®é‡æ—¶ä½¿ç”¨åˆ†é¡µ
- ä½¿ç”¨Spring Data JPAçš„Pageable
- é¿å…ä¸€æ¬¡æ€§åŠ è½½å¤§é‡æ•°æ®

### 4. æ‡’åŠ è½½
- å…³è”æ•°æ®ä½¿ç”¨æ‡’åŠ è½½
- æŒ‰éœ€åŠ è½½è¯„è®ºå†…å®¹
- å‡å°‘ä¸å¿…è¦çš„æ•°æ®åº“æŸ¥è¯¢

---

## æ€»ç»“

âœ… **NotificationRecordå®ä½“å·²åˆ›å»º**
- å®Œæ•´çš„é€šçŸ¥è®°å½•å­—æ®µ
- åˆç†çš„ç´¢å¼•è®¾è®¡
- æ”¯æŒå¤šç§é€šçŸ¥ç±»å‹

âœ… **ProcessCommentå®ä½“å·²åˆ›å»º**
- æ”¯æŒæµç¨‹ã€ä»»åŠ¡ã€ç³»ç»Ÿä¸‰ç§è¯„è®ºç±»å‹
- æ”¯æŒé€»è¾‘åˆ é™¤
- æ”¯æŒçˆ¶å­è¯„è®ºå…³ç³»

âœ… **Repositoryæ¥å£å·²åˆ›å»º**
- ç¬¦åˆSpring Data JPAè§„èŒƒ
- ä¸°å¯Œçš„æŸ¥è¯¢æ–¹æ³•
- æ”¯æŒæ‰¹é‡æ“ä½œ

âœ… **ProcessNotificationServiceå·²æ›´æ–°**
- ç§»é™¤å†…å­˜å­˜å‚¨
- ä½¿ç”¨æ•°æ®åº“æŒä¹…åŒ–
- æ·»åŠ äº‹åŠ¡æ”¯æŒ
- å®Œæ•´çš„CRUDæ“ä½œ

âœ… **ProcessCommentServiceå·²æ›´æ–°**
- ç§»é™¤å†…å­˜å­˜å‚¨
- ä½¿ç”¨æ•°æ®åº“æŒä¹…åŒ–
- é€»è¾‘åˆ é™¤å®ç°
- æƒé™æ£€æŸ¥å®ç°

ğŸ¯ **æ•°æ®åº“æŒä¹…åŒ–å±‚å·²å®Œæˆï¼**
- é€šçŸ¥å’Œè¯„è®ºåŠŸèƒ½å·²æ”¯æŒæ•°æ®åº“æŒä¹…åŒ–
- æ•°æ®å¯é æ€§å’Œå¯æ‰©å±•æ€§å¾—åˆ°ä¿è¯
- æ”¯æŒç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

ğŸ“ **åç»­å»ºè®®**:
1. æ‰§è¡Œæ•°æ®åº“è¿ç§»è„šæœ¬åˆ›å»ºè¡¨ç»“æ„
2. æ·»åŠ å•å…ƒæµ‹è¯•éªŒè¯æ•°æ®è®¿é—®å±‚
3. æ·»åŠ Redisç¼“å­˜æé«˜æ€§èƒ½
4. æ·»åŠ å®šæ—¶ä»»åŠ¡æ¸…ç†è¿‡æœŸæ•°æ®
5. æ·»åŠ æ•°æ®åº“å¤‡ä»½ç­–ç•¥
6. ç»§ç»­æ‰§è¡Œå…¶ä»–æ¨¡å—å¼€å‘

ğŸ‰ **æ•°æ®åº“æŒä¹…åŒ–å±‚å®ç°å·²å®Œæˆï¼é€šçŸ¥å’Œè¯„è®ºåŠŸèƒ½å·²æ”¯æŒæ•°æ®åº“æŒä¹…åŒ–ï¼**
